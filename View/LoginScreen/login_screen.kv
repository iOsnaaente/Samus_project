#
# Card New User 
#
<CardNewUser>:
    id: login_card
    
    new_user:       user
    new_password:   password
    new_family:     family 

    size_hint: .7, .5
    pos_hint: { 'center_x': .5, 'center_y': .5}
    orientation: 'vertical'
    elevation: 2 
    #
    # Janela New User 
    #
    MDBoxLayout:
        size_hint_y: .2 
        padding: [ 25, 0, 25, 0]
        md_bg_color: app.theme_cls.primary_color
        orientation: 'horizontal'
        MDLabel: 
            text: 'Criar novo usuário'
            font_size: 16
            theme_text_color: 'Custom'
            text_color: 1,1,1,1
        MDIconButton:
            icon: 'close'
            pos_hint: {'center_y': .5 }
            theme_text_color: 'Custom'
            text_color: 1,1,1,1
            on_release: root.parent.controller.close_widget( )

    MDFloatLayout:
        MDTextField:
            id: user 
            hint_text: 'Usuário:'
            pos_hint: {'center_x': .5, 'center_y': .9 }
            size_hint_x: .9 
            max_text_length: 32
            hint_text: 'Usuário'
            icon_left: 'account-circle'
            mode: "rectangle"  
        MDTextField:
            id: password
            hint_text: 'Senha'
            password: True 
            helper_text: 'Use a data de nascimento - ddmmaaaa'
            pos_hint: {'center_x': .5, 'center_y': .65 }
            size_hint_x: .9 
            icon_left: 'key-variant'
            mode: "rectangle"
        MDIconButton:
            icon: "eye-off"
            pos_hint: {"right": .95, "center_y": .635}
            theme_icon_color: 'Custom'
            icon_color: [.8,.8,.8,1]
            on_release:
                self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                password.password = False if password.password is True else True


        MDTextField:
            id: family
            hint_text: 'Nome da familia:'
            pos_hint: {'center_x': .5, 'center_y': .4 }
            size_hint_x: .9 
            mode: "rectangle"
        MDRaisedButton: 
            text: 'Create'
            pos_hint: {'center_x': .5, 'center_y': .15 }
            size_hint_x: .9
            size_hint_y: .1
            on_release: root.parent.create_new_user( user.text, password.text, family.text ) 
#
# Body 
#
<LoginScreenView>
    username: login_user_field 
    password: login_password_field 
    MDBoxLayout:
        size_hint: 1, 1
        md_bg_color: [ 84/255, 84/255, 84/255, 1 ] # RGBA( 84, 84, 84, 1)
        orientation: 'vertical'
        #
        # Welcome to SAMUS 
        #
        MDBoxLayout:
            id: login_title 
            size_hint: 1, .2
            orientation: 'vertical'
            MDLabel:
                size_hint: 1, .25
            MDLabel:
                size_hint: 1, .15
                text: "Bem vindo ao ".upper()
                color: 'white'
                font_style: 'H2'
                bold:  False
                font_size: 26
                valign: 'bottom'
                halign: 'center'
            MDLabel:
                size_hint: 1, .6
                text: "SAMUS"
                font_style: 'H2'
                color:  'white'
                bold:  True
                font_size: 46
                valign: 'center'
                halign: 'center'
        #
        # Samus Image 
        #
        MDBoxLayout:
            id: login_image
            size_hint: .5, .3
            pos_hint: {'center_x': 0.50,'center_y': 0.50 }
            FitImage:
                id: logo_image
                source: root.samus_image 
                allow_stretch: True 
                keep_ratio: True
                color: [1,0,0,1]
        #
        # Usuário 
        #
        MDBoxLayout: 
            size_hint: 0.9, .1
            pos_hint: {'center_x': 0.5,'center_y': 0.35}
            orientation: 'horizontal'
            MDTextField:
                id: login_user_field
                max_text_length: 32
                text: root.model.user
                hint_text: 'Usuário'
                icon_left: 'account-circle-outline'
                text_color_normal: 'white'
                line_color_normal: 'white'
                icon_left_color_normal: 'white'
                max_length_text_color: app.theme_cls.primary_color
                hint_text_color_normal:  'white'
        #
        # Senha 
        #
        MDBoxLayout: 
            size_hint: 0.9, .1
            pos_hint: {'center_x': 0.5,'center_y': 0.5}
            orientation: 'horizontal'
            MDTextField:
                id: login_password_field
                password: True 
                hint_text: 'Senha'
                text: root.model.psd 
                icon_left: 'key-variant'
                text_color_normal: 'white'
                line_color_normal: 'white'
                icon_left_color_normal: 'white'
                hint_text_color_normal:  'white'
            MDIconButton:
                icon: "eye-off"
                pos_hint: {"center_y": .5}
                theme_icon_color: 'Custom'
                icon_color: 'white'
                on_release:
                    self.icon = "eye" if self.icon == "eye-off" else "eye-off"
                    login_password_field.password = False if login_password_field.password is True else True
        #
        # Login Buttom
        #
        MDBoxLayout:
            size_hint: 0.9, .1
            pos_hint: {'center_x': 0.50,'center_y': 0.5 }
            MDFillRoundFlatButton:
                size_hint: 0.9, .5
                pos_hint: {'center_x': 0.50,'center_y': 0.5 }
                md_bg_color: [ 93/255, 35/255, 235/255, 1 ]
                text: 'Login'
                font_style: 'Button'
                font_size: 16
                on_release: root.login( ) 


        #
        # Reter usuário e senha 
        #
        MDBoxLayout:
            size_hint: 0.9, .1
            orientation: 'horizontal'
            pos_hint: {'center_x': 0.50,'center_y': 0.50}
            MDCheckbox:
                id: checkbox_keep_login
                pos_hint: {'top': 1 }
                size_hint: .1, .5
                state: 
                    root.model.checkbox_keep_login_data
                on_release: 
                    root.model.checkbox_keep_login_data = self.state
                color_inactive: 'white'
            MDLabel:
                text: ' usuário e senha?'
                font_style: 'Subtitle2'
                pos_hint: {'top': 1 }
                size_hint: .9, .5
                halign: 'left'
                color: 'white'

        #
        # New user
        #
        MDBoxLayout: 
            size_hint: .9, .1
            pos_hint: {'center_x': 0.50,'center_y': 0.50}
            orientation: 'vertical'
            MDLabel:
                size_hint: 1, .4
                text: 'Não possui registro?'
                halign: 'center'
                font_style: 'Body1'
                color: 'white'
                bold: True
                font_size: 12
            MDBoxLayout:
                size_hint: 1, .6
                MDFillRoundFlatButton:
                    size_hint: 1, .7
                    text: 'Registre-se'
                    font_style: 'Button'
                    md_bg_color: [ .75, .75, .75, .75]
                    pos_hint: {'center_y': 0.6 }
                    on_release: root.controller.raise_card( )  
            


    #
    # Ponto de informação no canto superior direito 
    #
    MDFloatLayout:
        MDIconButton:
            icon: 'help-circle-outline'
            pos_hint: {'right': 1,'top': .96}
            theme_icon_color: 'Custom'
            icon_color: 'white'
            on_release: self.icon = "help-circle-outline" if self.icon == "help-circle" else "help-circle"